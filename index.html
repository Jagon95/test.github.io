<html>
<head>

</head>
<body>
<script src="//vk.com/js/api/openapi.js" type="text/javascript"></script>

<div id="login_button" onclick="VK.Auth.login(authInfo, 3);"></div>

<script language="javascript">
//    VK.init({
//        apiId: 6054906
//    });
//
//
//    function authInfo(response) {
//    if (response.session) {
//        alert('user: '+response.session.mid);
//    } else {
//        alert('not auth');
//    }
//    }


    function vkQueryBuilder(method, fields) {
        query = 'https://api.vk.com/method/' + method + '?';
        for(key in fields) {
            query += key + '=' + fields[key] + '&';
        }
        return query;
    }


    rights = ['notify', 'friends'];
//https://oauth.vk.com/authorize?client_id=6054906&scope=rights.join(',')&redirect_uri=https://jagon95.github.io&display=page&response_type=token
    const TOKEN = 'cce4bc87ad9b7d36127a9884cb4bf131641ff41b85aa42967602761d8e0c247f2064032b68aa2d0abf904';

//cce4bc87ad9b7d36127a9884cb4bf131641ff41b85aa42967602761d8e0c247f2064032b68aa2d0abf904
//    VK.Auth.getLoginStatus(authInfo);
//    VK.UI.button('login_button');
//    https://api.vk.com/method/METHOD_NAME?PARAMETERS&access_token=ACCESS_TOKEN

    xhr = new XMLHttpRequest();
    xhr.open('GET', vkQueryBuilder('friends.get', {access_token: TOKEN, count: 5}));
    xhr.onreadystatechange = function() {
        if (xhr.readyState != 4) return;

        if (xhr.status != 200) {
            alert(xhr.status + ': ' + xhr.statusText);
        } else {
            alert(xhr.responseText);
        }

    }


//если нет куки
    //кнопка авторизации
    //иначе авторизация



    //если хорошо - рисуем блок с именем и списком друзей
    //  кнопка релоад - для того, чтобы показать других друзей
    //иначе выводим сообщение о том, что все плохо
    //  и предлагаем залогиниться еще




</script>

</body>


</html>
